2025-02-28 00:00
Tags:  #Browser #рендерингВБраузере

Процесс отображения веб-страницы в браузере — это сложная последовательность этапов, которые превращают HTML, CSS и JavaScript в то, что мы видим на экране. Вот основные этапы этого процесса:

---

### 1. **Парсинг HTML**

- Браузер читает HTML-код и преобразует его в **DOM (Document Object Model)** .
- DOM — это древовидная структура элементов страницы. Каждый HTML-тег становится узлом дерева.
- Если в HTML встречается `<script>` с JavaScript, выполнение скрипта блокирует парсинг HTML до тех пор, пока скрипт не будет выполнен (если он не помечен как `async` или `defer`).

---

### 2. **Парсинг CSS**

- Браузер читает CSS-код и создает **CSSOM (CSS Object Model)** — древовидную структуру правил стилей.
- CSS является критичным для рендеринга, поэтому браузер останавливает построение DOM, если CSS еще не загружен.

---

### 3. **Создание Render Tree**

- На этом этапе **DOM** и **CSSOM** объединяются для создания **Render Tree** (или **Layout Tree** ).
- Render Tree содержит только те элементы, которые должны быть отображены на странице (например, элементы с `display: none` исключаются из дерева).
- Каждому узлу добавляются вычисленные стили из CSSOM.

---

### 4. **Расчет Размеров (Layout)**

- На этом этапе браузер определяет точные позиции и размеры каждого элемента в **Render Tree**.
- Процесс зависит от ширины окна браузера, свойств CSS (например, `width`, `height`, `margin`, `padding`) и других факторов.

---

### 5. **Отрисовка (Painting)**

- На этом этапе браузер "рисует" каждый элемент Render Tree на экране.
- Этот процесс включает рисование текста, цветов, границ, теней, градиентов и других визуальных элементов.

---

### 6. **Компазиция (Compositing)**

- После того как все элементы нарисованы, браузер собирает их в один финальный изображение.
- Элементы могут быть разбиты на слои (layers), чтобы оптимизировать анимации и переходы.
- Эти слои затем "склеиваются" вместе для создания конечной картинки, которая отображается на экране.

---

### 7. **JavaScript Вмешательство**

- JavaScript может изменять **DOM** и **CSSOM** во время работы страницы, что вызывает повторные этапы выше.
- Важно минимизировать такие изменения для повышения производительности.

---

### 8. **Анимация (Перерисовка кадров)**

- Если на странице есть анимации или интерактивные элементы, браузер продолжает выполнять цикл рендеринга:
    - Обновление данных (например, через JavaScript).
    - Пересчет Layout и Paint.
    - Компоновка нового кадра.
- Этот процесс происходит обычно со скоростью 60 FPS (кадров в секунду).

---
### Links
[[Browser]]
